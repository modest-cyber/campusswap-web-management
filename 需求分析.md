# 西安石油大学校园二手商品交易网需求分析文档

## 1. 项目概述

### 1.1 项目背景
随着高校学生消费需求的多样化和环保意识的提升，校园二手商品交易市场日益活跃。为了规范校园二手商品交易流程，提高交易效率，保障交易安全，特开发西安石油大学校园二手商品交易网。

### 1.2 项目目标
- 为西安石油大学师生提供便捷、安全的二手商品交易平台
- 实现二手商品的发布、查询、交易全流程管理
- 提供完善的交易信息统计与分析功能
- 建立规范化的校园二手商品交易管理体系

### 1.3 技术架构
- **前端技术栈**：Vue 3 + Vite + Element Plus / Ant Design Vue
- **后端技术栈**：Spring Boot 3 + MyBatis + MySQL
- **开发工具**：Maven、Git
- **部署环境**：Tomcat / Nginx

## 2. 用户角色分析

### 2.1 普通用户
**角色定义**：西安石油大学在校学生和教职工

**权限范围**：
- 用户注册与登录
- 个人信息管理
- 发布二手商品信息
- 浏览和搜索二手商品
- 购买二手商品
- 管理自己发布的商品
- 查看交易记录
- 评价与反馈

### 2.2 管理员
**角色定义**：系统管理员，负责平台运营与管理

**权限范围**：
- 用户管理（查看、审核、禁用用户）
- 商品管理（审核、下架、删除商品）
- 交易管理（查看交易记录、处理交易纠纷）
- 数据统计与分析
- 系统配置管理
- 公告发布

## 3. 功能需求详细分析

### 3.1 用户管理模块

#### 3.1.1 用户注册
**功能描述**：新用户注册账号

**详细需求**：
- 注册信息包括：用户名、密码、确认密码、真实姓名、学号/工号、手机号、邮箱、所属院系
- 用户名唯一性校验
- 密码强度验证（至少8位，包含字母和数字）
- 手机号格式验证
- 邮箱格式验证
- 学号/工号格式验证（可选）
- 注册成功后发送验证邮件/短信（可选）

**输入**：用户注册信息
**输出**：注册成功提示或错误信息

#### 3.1.2 用户登录
**功能描述**：用户登录系统

**详细需求**：
- 支持用户名/手机号/邮箱登录
- 密码加密存储
- 登录失败次数限制（防止暴力破解）
- 记住登录状态（可选）
- 登录成功后跳转到首页

**输入**：用户名/手机号/邮箱、密码
**输出**：登录成功跳转或错误提示

#### 3.1.3 个人信息管理
**功能描述**：用户查看和修改个人信息

**详细需求**：
- 查看个人信息（用户名、真实姓名、联系方式等）
- 修改个人信息（除用户名外）
- 修改密码
- 上传头像

**输入**：修改后的用户信息
**输出**：更新成功提示

#### 3.1.4 用户注销
**功能描述**：用户注销账号

**详细需求**：
- 注销前需确认
- 检查是否有未完成的交易

### 3.2 商品管理模块

#### 3.2.1 商品发布（普通用户）
**功能描述**：用户发布二手商品信息

**详细需求**：
- 必填信息：商品名称、商品分类、商品描述、价格、商品图片（至少1张）、联系方式
- 可选信息：商品原价、购买时间、使用时长、商品状态（全新/九成新/八成新等）、交易方式（面交/邮寄）
- 商品图片上传（支持多图，最多9张）
- 商品分类选择（如：电子产品、图书、生活用品、服装、运动用品等）
- 价格输入验证（必须为正数）
- 发布前预览功能

**输入**：商品详细信息
**输出**：发布成功提示，商品ID

#### 3.2.2 商品查询与浏览
**功能描述**：用户浏览和搜索商品

**详细需求**：
- 商品列表展示（分页显示）
- 商品搜索（按商品名称、描述关键词搜索）
- 商品筛选（按分类、价格区间、发布时间、商品状态筛选）
- 商品排序（按价格、发布时间、热度排序）
- 商品详情页展示
- 商品图片轮播查看
- 查看发布者信息
- 收藏商品功能
- 举报商品功能

**输入**：搜索关键词、筛选条件、排序方式
**输出**：商品列表、商品详情

#### 3.2.3 商品管理（普通用户）
**功能描述**：用户管理自己发布的商品

**详细需求**：
- 查看已发布的商品列表
- 编辑商品信息（未交易的商品）
- 下架商品
- 删除商品（需确认，已交易的商品不可删除）
- 查看商品浏览量和收藏量
- 重新上架已下架的商品

**输入**：商品ID、操作类型
**输出**：操作结果提示

#### 3.2.4 商品审核与管理（管理员）
**功能描述**：管理员审核和管理商品

**详细需求**：
- 查看待审核商品列表
- 审核商品（通过/拒绝）
- 下架违规商品
- 删除违规商品
- 查看商品统计信息
- 批量操作商品

**输入**：商品ID、审核结果、操作原因
**输出**：操作结果提示

### 3.3 交易管理模块

#### 3.3.1 商品购买
**功能描述**：用户购买二手商品

**详细需求**：
- 查看商品详情
- 联系卖家（显示联系方式或站内消息）
- 确认购买（创建订单）
- 订单状态管理（待支付、待发货、待收货、已完成、已取消）
- 交易方式选择（面交/邮寄）
- 订单备注功能
- 取消订单功能（需符合条件）

**输入**：商品ID、购买数量、交易方式、备注
**输出**：订单信息

#### 3.3.2 订单管理
**功能描述**：用户管理订单

**详细需求**：
- 查看我的订单列表（买家视角）
- 查看我收到的订单列表（卖家视角）
- 订单详情查看
- 订单状态更新（卖家发货、买家确认收货）
- 订单取消（需双方同意或符合条件）
- 订单评价功能
- 订单搜索与筛选

**输入**：订单ID、操作类型
**输出**：订单列表、订单详情

#### 3.3.3 交易记录查询
**功能描述**：用户查看交易历史记录

**详细需求**：
- 查看作为买家的交易记录
- 查看作为卖家的交易记录
- 按时间范围筛选交易记录
- 按订单状态筛选
- 交易记录导出（可选）

**输入**：筛选条件
**输出**：交易记录列表

### 3.4 数据统计与分析模块（管理员）

#### 3.4.1 用户统计
**功能描述**：统计用户相关数据

**详细需求**：
- 用户总数统计
- 新增用户统计（按日/周/月）
- 活跃用户统计
- 用户分布统计（按院系）
- 用户注册趋势图表

**输出**：统计数据、图表

#### 3.4.2 商品统计
**功能描述**：统计商品相关数据

**详细需求**：
- 商品总数统计
- 商品分类分布统计
- 商品发布趋势统计
- 热门商品排行
- 商品价格分布统计
- 商品状态分布统计

**输出**：统计数据、图表

#### 3.4.3 交易统计
**功能描述**：统计交易相关数据

**详细需求**：
- 交易总数统计
- 交易金额统计（总交易额、平均交易额）
- 交易趋势分析（按日/周/月）
- 交易成功率统计
- 交易分类统计
- 交易方式统计（面交/邮寄比例）
- 交易排行榜（最活跃买家/卖家）

**输出**：统计数据、图表

#### 3.4.4 综合报表
**功能描述**：生成综合数据报表

**详细需求**：
- 平台整体运营数据概览
- 数据可视化展示（折线图、柱状图、饼图等）
- 报表导出功能（Excel/PDF）
- 自定义时间范围查询

**输出**：数据报表、图表

### 3.5 系统管理模块（管理员）

#### 3.5.1 用户管理
**功能描述**：管理员管理用户账号

**详细需求**：
- 查看用户列表（支持搜索、筛选）
- 查看用户详情
- 禁用/启用用户账号
- 重置用户密码
- 删除用户账号（需谨慎）
- 用户权限管理

**输入**：用户ID、操作类型
**输出**：操作结果

#### 3.5.2 系统配置
**功能描述**：管理系统配置参数

**详细需求**：
- 商品分类管理（增删改查）
- 系统公告管理
- 系统参数配置
- 数据备份与恢复（可选）

**输入**：配置信息
**输出**：配置结果

## 4. 非功能需求

### 4.1 性能需求
- 系统响应时间：页面加载时间不超过3秒
- 并发用户数：支持至少500个并发用户
- 数据库查询响应时间：单次查询不超过1秒
- 图片上传大小限制：单张图片不超过5MB

### 4.2 安全需求
- 用户密码加密存储（BCrypt）
- 防止SQL注入攻击
- 防止XSS攻击
- 接口访问权限控制
- 敏感信息脱敏显示
- 操作日志记录

### 4.3 可用性需求
- 系统可用性：99%以上
- 支持主流浏览器（Chrome、Firefox、Edge、Safari）
- 响应式设计，支持移动端访问
- 友好的错误提示信息

### 4.4 可维护性需求
- 代码规范统一
- 完善的注释和文档
- 模块化设计，便于扩展
- 日志记录完善

### 4.5 兼容性需求
- 支持Windows、Linux、macOS操作系统
- 支持主流浏览器最新版本
- 移动端浏览器兼容

## 5. 数据库设计需求

### 5.1 核心数据表

#### 5.1.1 用户表（user）
**字段设计**：
- id：主键，自增
- username：用户名，唯一
- password：密码（加密）
- real_name：真实姓名
- student_id：学号/工号
- phone：手机号
- email：邮箱
- department：所属院系
- avatar：头像URL
- role：角色（0-普通用户，1-管理员）
- status：状态（0-正常，1-禁用）
- create_time：创建时间
- update_time：更新时间

#### 5.1.2 商品表（product）
**字段设计**：
- id：主键，自增
- user_id：发布者ID（外键）
- category_id：分类ID（外键）
- title：商品名称
- description：商品描述
- price：价格
- original_price：原价
- images：商品图片（JSON数组）
- status：商品状态（0-待审核，1-在售，2-已下架，3-已售出，4-审核拒绝）
- condition：商品成色（全新/九成新/八成新等）
- transaction_type：交易方式（0-面交，1-邮寄，2-均可）
- view_count：浏览量
- favorite_count：收藏量
- create_time：创建时间
- update_time：更新时间

#### 5.1.3 商品分类表（category）
**字段设计**：
- id：主键，自增
- name：分类名称
- parent_id：父分类ID（支持二级分类）
- sort_order：排序
- status：状态（0-禁用，1-启用）
- create_time：创建时间

#### 5.1.4 订单表（order）
**字段设计**：
- id：主键，自增
- order_no：订单号（唯一）
- buyer_id：买家ID（外键）
- seller_id：卖家ID（外键）
- product_id：商品ID（外键）
- quantity：购买数量
- total_price：总价
- transaction_type：交易方式
- status：订单状态（0-待支付，1-待发货，2-待收货，3-已完成，4-已取消）
- remark：备注
- address：收货地址（邮寄时）
- create_time：创建时间
- update_time：更新时间
- complete_time：完成时间

#### 5.1.5 收藏表（favorite）
**字段设计**：
- id：主键，自增
- user_id：用户ID（外键）
- product_id：商品ID（外键）
- create_time：创建时间

#### 5.1.6 评价表（review）（可选）
**字段设计**：
- id：主键，自增
- order_id：订单ID（外键）
- reviewer_id：评价者ID（外键）
- reviewed_id：被评价者ID（外键）
- rating：评分（1-5星）
- comment：评价内容
- create_time：创建时间

### 5.2 索引设计
- 用户表：username、phone、email建立唯一索引
- 商品表：user_id、category_id、status建立索引
- 订单表：buyer_id、seller_id、order_no建立索引
- 收藏表：user_id、product_id建立联合索引

## 6. API接口设计需求

### 6.1 用户相关接口
- `POST /api/user/register` - 用户注册
- `POST /api/user/login` - 用户登录
- `POST /api/user/logout` - 用户登出
- `GET /api/user/info` - 获取用户信息
- `PUT /api/user/info` - 更新用户信息
- `PUT /api/user/password` - 修改密码
- `POST /api/user/avatar` - 上传头像

### 6.2 商品相关接口
- `POST /api/product` - 发布商品
- `GET /api/product/list` - 获取商品列表
- `GET /api/product/{id}` - 获取商品详情
- `PUT /api/product/{id}` - 更新商品信息
- `DELETE /api/product/{id}` - 删除商品
- `POST /api/product/{id}/favorite` - 收藏商品
- `DELETE /api/product/{id}/favorite` - 取消收藏
- `GET /api/product/my` - 获取我的商品列表
- `GET /api/product/favorite` - 获取收藏列表

### 6.3 订单相关接口
- `POST /api/order` - 创建订单
- `GET /api/order/list` - 获取订单列表
- `GET /api/order/{id}` - 获取订单详情
- `PUT /api/order/{id}/status` - 更新订单状态
- `DELETE /api/order/{id}` - 取消订单

### 6.4 统计相关接口（管理员）
- `GET /api/admin/statistics/user` - 用户统计
- `GET /api/admin/statistics/product` - 商品统计
- `GET /api/admin/statistics/transaction` - 交易统计
- `GET /api/admin/statistics/overview` - 综合统计

### 6.5 管理相关接口（管理员）
- `GET /api/admin/user/list` - 用户列表
- `PUT /api/admin/user/{id}/status` - 更新用户状态
- `GET /api/admin/product/list` - 商品列表（待审核）
- `PUT /api/admin/product/{id}/audit` - 审核商品
- `GET /api/admin/order/list` - 订单列表

## 7. 前端页面需求

### 7.1 用户端页面
- **首页**：商品展示、分类导航、搜索功能
- **商品详情页**：商品信息展示、图片轮播、联系卖家、收藏功能
- **商品发布页**：商品信息表单、图片上传
- **个人中心**：个人信息、我的商品、我的订单、我的收藏
- **订单页面**：订单列表、订单详情
- **登录/注册页**：用户登录和注册表单

### 7.2 管理员端页面
- **管理后台首页**：数据概览、统计图表
- **用户管理页**：用户列表、用户详情、用户操作
- **商品管理页**：商品列表、商品审核、商品操作
- **订单管理页**：订单列表、订单详情
- **数据统计页**：各类统计图表、数据报表
- **系统配置页**：分类管理、公告管理

## 8. 开发阶段规划

### 8.1 第一阶段：基础功能开发
- 用户注册登录功能
- 商品发布与浏览功能
- 基础的商品管理功能

### 8.2 第二阶段：交易功能开发
- 订单创建与管理
- 交易流程完善
- 收藏功能

### 8.3 第三阶段：管理功能开发
- 管理员后台开发
- 数据统计功能
- 系统管理功能

### 8.4 第四阶段：优化与测试
- 性能优化
- 安全加固
- 功能测试
- 用户体验优化

## 9. 测试需求

### 9.1 功能测试
- 各功能模块的功能完整性测试
- 边界条件测试
- 异常情况测试

### 9.2 性能测试
- 并发测试
- 压力测试
- 响应时间测试

### 9.3 安全测试
- SQL注入测试
- XSS攻击测试
- 权限控制测试

### 9.4 兼容性测试
- 浏览器兼容性测试
- 移动端兼容性测试

## 10. 部署需求

### 10.1 环境要求
- JDK 17或以上
- MySQL 8.0或以上
- Node.js 18或以上（前端）
- Nginx（可选，用于反向代理和静态资源）

### 10.2 部署步骤
1. 数据库初始化（创建数据库、表结构、初始数据）
2. 后端服务部署（打包、配置、启动）
3. 前端项目构建（npm build）
4. 前端资源部署（静态文件部署）
5. 配置Nginx反向代理（可选）

## 11. 后续扩展功能（可选）

### 11.1 消息系统
- 站内消息通知
- 交易消息提醒
- 系统公告推送

### 11.2 评价系统
- 交易评价功能
- 信用评分系统
- 评价展示

### 11.3 支付系统
- 在线支付集成（支付宝、微信支付）
- 交易担保功能

### 11.4 推荐系统
- 商品推荐算法
- 个性化推荐

### 11.5 移动端APP
- 开发移动端原生应用
- 推送通知功能

---

## 附录

### A. 术语表
- **面交**：买卖双方线下面对面交易
- **邮寄**：通过快递方式完成交易
- **商品状态**：商品在系统中的当前状态（在售、已售出等）
- **订单状态**：订单在交易流程中的当前状态

### B. 参考文档
- Spring Boot 3官方文档
- Vue 3官方文档
- MyBatis官方文档
- MySQL官方文档

---

**文档版本**：v1.0  
**创建日期**：2024年  
**最后更新**：2024年

