# 西安石油大学校园二手商品交易网前端开发需求文档

> 基于《需求分析.md》编制，聚焦前端（Vue3 + Vite + 组件库 Element Plus/Ant Design Vue）。本文件覆盖信息架构、页面需求、交互与状态管理、接口对接、权限/安全、性能与测试要求。数据库与后端实现不在本文件范围。

## 1. 技术栈与基础规范
- 框架：Vue 3（Composition API + `<script setup>`），Vite 构建。
- 组件库：Element Plus 或 Ant Design Vue（保持一致性），图标库可用 Iconify。
- 路由：Vue Router 4，前后端分离，支持路由守卫。
- 状态管理：Pinia（集中管理用户、商品、订单、字典、配置等状态）。
- HTTP：Axios 封装，支持 BaseURL、超时、重试（可选）、全局错误拦截、统一响应处理。
- 认证：JWT 存储在 Cookie（HttpOnly 优先，若受限可用 localStorage + 前端拦截过期）；请求头携带 Authorization: Bearer <token>。
- 样式：CSS Variables / SCSS；移动端适配（基础响应式）可选。
- 代码规范：ESLint + Prettier + StyleLint（如有），约定 import 顺序、组件命名、文件命名（kebab-case）。
- 国际化：暂不必需；保留扩展能力。

## 2. 信息架构与导航
- 顶部导航：主页、分类入口、我的（登录态显示下拉：个人信息/我的订单/我的发布/收藏/退出）。
- 全局搜索：顶部搜索框，关键词搜索商品。
- 面包屑：详情/管理页提供返回与层级提示。
- Tab/侧边栏：个人中心与后台管理使用侧边导航。
- 移动端适配：导航折叠，卡片式列表。

## 3. 页面与功能需求

### 3.1 公共
- 登录/注册页：表单校验（必填、邮箱/手机号格式、密码强度≥8位含数字字母），错误提示；注册成功跳转登录。
- 404/403/500 页面：友好提示与返回首页按钮。
- 消息提示：全局 Loading、Success/Warning/Error Toast，表单校验错误聚焦。

### 3.2 首页
- 内容：轮播/公告（可选）、快捷分类导航、推荐/最新/热门商品列表。
- 列表卡片：商品图、名称、价格、成色、发布时间、收藏数、发布者昵称/院系（脱敏联系方式）。
- 操作：点击卡片进入详情，收藏/取消收藏（需登录，未登录提示登录）。
- 分页/无限滚动：至少支持分页。

### 3.3 商品列表/搜索页
- 过滤：分类（支持父子级）、价格区间、成色（枚举）、交易方式（面交/邮寄/均可）、发布时间、状态（在售）。
- 排序：最新、价格升序、价格降序、热度（浏览/收藏）。
- 结果呈现：卡片或列表；空状态展示引导。

### 3.4 商品详情页
- 展示：图片轮播、名称、描述、分类、价格/原价、成色、交易方式、发布时间、浏览/收藏数量。
- 卖家信息：昵称/院系，联系方式（脱敏/登录后显示），信誉（可选）。
- 操作：收藏/取消收藏、联系卖家（显示电话/邮箱或复制）、下单按钮（跳转下单流程或创建订单）。
- 举报入口：按钮/链接，打开对话框提交举报原因（前端调用后台预留接口或记录日志）。

### 3.5 商品发布/编辑页
- 表单：名称、分类级联、价格、原价（可选）、成色（下拉）、交易方式（单选）、描述（富文本/多行文本）、图片上传（1~9 张，类型/大小校验，展示顺序可调整）。
- 校验：必填项校验，价格>0，图片必传。
- 状态提示：保存/发布成功提示；若需审核，提示“待审核”状态。
- 编辑：仅商品所有者可编辑；已售出商品不可编辑核心字段。

### 3.6 我的发布
- 列表：展示自己的商品，含状态（待审核/在售/下架/已售出/审核拒绝）。
- 操作：编辑、下架/上架、删除（未成交）、查看浏览/收藏数。
- 分页与筛选：按状态筛选。

### 3.7 收藏列表
- 列表：已收藏商品卡片；支持取消收藏；点击跳转详情。
- 分页。

### 3.8 下单/订单流程
- 创建订单入口：商品详情页“立即购买”。
- 订单确认页：商品信息、数量（默认1，可限制为1）、交易方式选择（面交/邮寄）、邮寄地址表单（邮寄必填），备注。
- 订单列表（买家视角）：状态过滤（待支付/待发货/待收货/已完成/已取消），搜索（订单号），时间筛选。
- 订单列表（卖家视角）：收到的订单，发货/确认面交操作。
- 订单详情：显示物流/面交信息（若有）、状态流转记录（可选）。
- 操作：取消订单（规则：待支付可取消）、确认收货、卖家发货/面交确认。
- 评价入口：已完成订单展示评价按钮。

### 3.9 评价
- 提交评价：评分 1~5 星，文字评论（限长），防重复提交。
- 展示评价：在订单详情/用户主页（可选）展示评价列表。

### 3.10 个人中心
- 个人信息：头像上传、昵称/真实姓名、院系、手机号、邮箱（格式校验）、密码修改（原密码校验）。
- 安全登出。
- 注销账号入口：二次确认，若后端限制有未完成订单则提示不可注销。

### 3.11 管理后台（管理员角色）
- 登录后根据角色展示后台入口。
- 仪表盘：关键指标概览（用户数、商品数、订单数、成交额、待审核商品数）。
- 用户管理：列表（搜索：用户名/手机号/邮箱/院系），禁用/启用，查看详情。
- 商品审核：待审核列表，详情页包含图片、描述、发布者信息；操作通过/拒绝（填写理由），支持批量。
- 商品管理：违规下架、删除。
- 订单管理：列表+详情查看，支持状态/时间过滤。
- 分类管理：增删改查，排序，启用/禁用。
- 公告管理（可选）：发布/编辑/删除。

### 3.12 统计报表（管理员）
- 用户统计：注册趋势、活跃度、院系分布（图表）。
- 商品统计：分类分布、发布趋势、热门商品榜单。
- 交易统计：订单量、成交额、成功率、面交/邮寄占比、排行（买家/卖家）。
- 时间范围选择器，导出（可选 CSV）。

### 3.13 文件上传与展示
- 上传接口对接 `/api/file/upload`；前端校验：类型（图片）、大小（≤5MB/张），数量限制。
- 进度条/上传中态；失败重试；支持拖拽（可选）。
- 图片展示：列表/瀑布流/轮播，支持懒加载。

## 4. 状态管理与缓存
- Pinia 模块建议：auth（token、用户信息）、dict（分类、成色、交易方式枚举）、product、order、favorite、admin/stat。
- 分类、枚举等可缓存至 localStorage；提供失效刷新机制。
- 路由守卫：未登录访问需要登录的路由时跳转登录并记录回跳地址；管理员路由校验角色。

## 5. 接口对接与错误处理
- Axios 拦截：
  - 请求：附带 token，注入 traceId（可选）。
  - 响应：统一判断 `code === 0`，否则弹错误；401 触发登录流程，403 提示无权限。
  - 重复点击防抖：对下单/提交类接口按钮加 loading 与禁用。
- 表单校验错误：就近提示并滚动定位。
- 空状态与异常态：列表为空、加载失败、重试按钮。

## 6. 权限与安全
- 角色控制：菜单/路由/按钮级别显隐，基于用户 role（0/1）。
- 数据脱敏：非相关用户查看联系方式时隐藏部分手机号/邮箱。
- XSS：前端富文本渲染时使用安全模式或后端过滤；输出时转义。
- CSRF：若使用 Cookie 模式，需配合后端 CSRF 方案；否则使用 Bearer Token。
- 下载/导出：带鉴权；大数据导出提示异步处理（可选）。

## 7. 性能与体验
- 资源：开启 gzip/brotli；按需加载组件；路由懒加载；分包。
- 列表：图片懒加载、骨架屏、分页；大图压缩或限制分辨率。
- Loading：页面级与局部级；防止抖动的最小展示时间（可选）。
- 可访问性：图片 alt，表单 label，对比度可读。

## 8. 测试与验收
- 单元测试：核心组件/工具函数（可选）。
- E2E/集成：登录、发布商品、下单、发货/收货、评价、审核流、权限控制。
- 浏览器兼容：Chrome/Edge/Firefox/Safari 新版；移动端基础验证。
- 验收标准：页面与交互符合需求；接口联调通过；权限准确；关键流程闭环无阻塞。

## 9. 开发日程拆分（建议 5 天）
- **Day 1：基础框架与鉴权**
  - 项目脚手架、路由/Pinia/axios 封装、登录/注册页、路由守卫、全局样式/主题。
- **Day 2：商品主流程**
  - 首页、商品列表/搜索、详情页、收藏/取消收藏、全局搜索。
- **Day 3：发布与个人中心**
  - 商品发布/编辑、图片上传、我的发布、收藏列表、个人信息/修改密码/头像上传。
- **Day 4：订单与评价**
  - 下单确认、订单列表（买家/卖家）、订单详情、发货/确认收货/取消、评价提交/展示。
- **Day 5：后台与统计**
  - 管理后台框架、用户管理、商品审核、订单查看、分类管理、统计报表基础；优化与联调回归。

## 10. 交互与UI要点
- 统一按钮/表单/卡片/标签样式；状态颜色区分（在售/下架/审核中等）。
- 表单错误文案简洁明确；重要操作二次确认（删除、下架、取消订单、退出登录）。
- 列表与详情的操作一致性（同位置、同图标）。
- 适配深色模式（可选）。


