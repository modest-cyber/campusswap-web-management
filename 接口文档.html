<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>西安石油大学校园二手商品交易网接口文档</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f7fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 3px solid #e74c3c;
        }
        
        h2 {
            color: #34495e;
            margin-top: 40px;
            margin-bottom: 20px;
            padding-left: 10px;
            border-left: 4px solid #e74c3c;
        }
        
        h3 {
            color: #555;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-left: 10px;
        }
        
        h4 {
            color: #666;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        
        .api-section {
            margin-bottom: 40px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .api-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .api-url {
            background-color: #e3f2fd;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            font-weight: bold;
            margin-right: 15px;
        }
        
        .api-method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            font-size: 12px;
            text-transform: uppercase;
        }
        
        .method-get {
            background-color: #4caf50;
        }
        
        .method-post {
            background-color: #2196f3;
        }
        
        .method-put {
            background-color: #ff9800;
        }
        
        .method-delete {
            background-color: #f44336;
        }
        
        .api-info {
            margin-bottom: 15px;
        }
        
        .api-info-item {
            margin-bottom: 8px;
        }
        
        .api-info-item strong {
            color: #2c3e50;
            margin-right: 10px;
        }
        
        .params-section {
            margin-bottom: 20px;
        }
        
        .params-section h4 {
            color: #2196f3;
            margin-bottom: 10px;
        }
        
        .params-list {
            list-style-type: none;
            margin-left: 20px;
        }
        
        .params-list li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        .params-list li::before {
            content: "-";
            color: #2196f3;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        .params-list code {
            background-color: #e8f5e8;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
        }
        
        pre {
            background-color: #2d3748;
            color: #e2e8f0;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
        }
        
        code {
            font-family: 'Courier New', Courier, monospace;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background-color: #e74c3c;
            color: white;
            font-weight: bold;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #e3f2fd;
        }
        
        .status-code-table {
            margin: 20px 0;
        }
        
        .status-code-table th {
            background-color: #2c3e50;
        }
        
        .response-format {
            margin: 20px 0;
        }
        
        .response-format h4 {
            color: #4caf50;
            margin-bottom: 10px;
        }
        
        .common-params {
            margin: 20px 0;
        }
        
        .common-params h4 {
            color: #9c27b0;
            margin-bottom: 10px;
        }
        
        .note-section {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
            margin: 20px 0;
        }
        
        .note-section h4 {
            color: #856404;
            margin-top: 0;
            margin-bottom: 10px;
        }
        
        ul {
            list-style-type: none;
            margin-left: 20px;
            margin-bottom: 20px;
        }
        
        li {
            margin-bottom: 10px;
            padding-left: 20px;
            position: relative;
        }
        
        li::before {
            content: "•";
            color: #e74c3c;
            font-weight: bold;
            position: absolute;
            left: 0;
        }
        
        strong {
            color: #2c3e50;
        }
        
        .separator {
            height: 2px;
            background-color: #e0e0e0;
            margin: 40px 0;
        }
        
        .api-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .api-card {
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        
        .api-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .api-card h4 {
            margin-top: 0;
            color: #2196f3;
        }
        
        .api-card .api-url {
            font-size: 12px;
            margin-right: 10px;
        }
        
        @media (max-width: 768px) {
            .api-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .api-url {
                margin-right: 0;
                margin-bottom: 10px;
            }
            
            .api-list {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>西安石油大学校园二手商品交易网接口文档</h1>
        
        <!-- 认证接口 -->
        <h2>1. 认证接口</h2>
        
        <div class="api-section">
            <h3>1.1 用户注册</h3>
            <div class="api-header">
                <span class="api-url">/api/user/register</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "username": "string", // 用户名\n  "password": "string", // 密码\n  "realName": "string", // 真实姓名\n  "email": "string", // 邮箱\n  "phone": "string", // 电话\n  "studentId": "string", // 学号\n  "department": "string" // 学院\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": null\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>1.2 用户登录</h3>
            <div class="api-header">
                <span class="api-url">/api/user/login</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "account": "string", // 用户名或邮箱或电话\n  "password": "string" // 密码\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "token": "string", // JWT token\n    "userInfo": {\n      "id": 1,\n      "username": "string",\n      "role": "user", // 角色：user或admin\n      "realName": "string",\n      "email": "string",\n      "phone": "string",\n      "department": "string",\n      "avatar": "string"\n    }\n  }\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>1.3 获取用户信息</h3>
            <div class="api-header">
                <span class="api-url">/api/user/info</span>
                <span class="api-method method-get">GET</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "id": 1,\n    "username": "string",\n    "role": "user",\n    "realName": "string",\n    "email": "string",\n    "phone": "string",\n    "department": "string",\n    "avatar": "string"\n  }\n}</pre>
            </div>
        </div>
        
        <!-- 商品接口 -->
        <h2>2. 商品接口</h2>
        
        <div class="api-section">
            <h3>2.1 获取商品分类列表</h3>
            <div class="api-header">
                <span class="api-url">/api/category/list</span>
                <span class="api-method method-get">GET</span>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": [\n    {\n      "id": 1,\n      "name": "电子产品",\n      "parentId": 0,\n      "status": 1\n    },\n    {\n      "id": 2,\n      "name": "手机",\n      "parentId": 1,\n      "status": 1\n    }\n  ]\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>2.2 获取商品列表</h3>
            <div class="api-header">
                <span class="api-url">/api/product/list</span>
                <span class="api-method method-get">GET</span>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <ul class="params-list">
                    <li><code>keyword</code>: 搜索关键词</li>
                    <li><code>categoryId</code>: 分类ID</li>
                    <li><code>minPrice</code>: 最低价格</li>
                    <li><code>maxPrice</code>: 最高价格</li>
                    <li><code>status</code>: 商品状态</li>
                    <li><code>sort</code>: 排序方式 (latest, priceAsc, priceDesc, hot)</li>
                    <li><code>pageNum</code>: 页码，默认1</li>
                    <li><code>pageSize</code>: 每页数量，默认10</li>
                </ul>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "list": [\n      {\n        "id": 1,\n        "title": "iPhone 13",\n        "description": "9成新，无磕碰",\n        "price": 4500,\n        "originalPrice": 6999,\n        "images": ["url1", "url2"],\n        "status": 1,\n        "condition": "9成新",\n        "transactionType": 2,\n        "viewCount": 100,\n        "favoriteCount": 10,\n        "categoryId": 2,\n        "categoryName": "手机",\n        "sellerName": "张三",\n        "sellerDepartment": "计算机学院",\n        "sellerAvatar": "url",\n        "createdAt": "2023-01-01 10:00:00",\n        "isFavorite": false\n      }\n    ],\n    "total": 1,\n    "pageNum": 1,\n    "pageSize": 10\n  }\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>2.3 获取商品详情</h3>
            <div class="api-header">
                <span class="api-url">/api/product/{id}</span>
                <span class="api-method method-get">GET</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>路径参数</strong>：id: 商品ID
                </div>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "id": 1,\n    "title": "iPhone 13",\n    "description": "9成新，无磕碰",\n    "price": 4500,\n    "originalPrice": 6999,\n    "images": ["url1", "url2"],\n    "status": 1,\n    "condition": "9成新",\n    "transactionType": 2,\n    "viewCount": 100,\n    "favoriteCount": 10,\n    "categoryId": 2,\n    "categoryName": "手机",\n    "sellerId": 1,\n    "sellerName": "张三",\n    "sellerDepartment": "计算机学院",\n    "sellerAvatar": "url",\n    "createdAt": "2023-01-01 10:00:00",\n    "isFavorite": false\n  }\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>2.4 发布商品</h3>
            <div class="api-header">
                <span class="api-url">/api/product</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "title": "string",\n  "description": "string",\n  "price": 0,\n  "originalPrice": 0,\n  "images": ["string"],\n  "categoryId": 0,\n  "condition": "string",\n  "transactionType": 0\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": 1 // 商品ID\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>2.5 编辑商品</h3>
            <div class="api-header">
                <span class="api-url">/api/product/{id}</span>
                <span class="api-method method-put">PUT</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
                <div class="api-info-item">
                    <strong>路径参数</strong>：id: 商品ID
                </div>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求参数</strong>：同发布商品
                </div>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": null\n}</pre>
            </div>
        </div>
        
        <!-- 订单接口 -->
        <h2>3. 订单接口</h2>
        
        <div class="api-section">
            <h3>3.1 创建订单</h3>
            <div class="api-header">
                <span class="api-url">/api/order</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "productId": 0,\n  "quantity": 1,\n  "transactionType": 0,\n  "receiverName": "string",\n  "receiverPhone": "string",\n  "receiverAddress": "string",\n  "remark": "string"\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "id": 1,\n    "orderNo": "string",\n    "productId": 1,\n    "productTitle": "string",\n    "productImage": "string",\n    "quantity": 1,\n    "totalAmount": 4500,\n    "transactionType": 2,\n    "status": 0,\n    "createdAt": "string"\n  }\n}</pre>
            </div>
        </div>
        
        <div class="api-section">
            <h3>3.2 获取订单列表</h3>
            <div class="api-header">
                <span class="api-url">/api/order/list</span>
                <span class="api-method method-get">GET</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <ul class="params-list">
                    <li><code>viewType</code>: 视图类型 (buyer-买家视角, seller-卖家视角)</li>
                    <li><code>status</code>: 订单状态</li>
                    <li><code>orderNo</code>: 订单号</li>
                    <li><code>startDate</code>: 开始日期</li>
                    <li><code>endDate</code>: 结束日期</li>
                    <li><code>pageNum</code>: 页码，默认1</li>
                    <li><code>pageSize</code>: 每页数量，默认10</li>
                </ul>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "list": [\n      {\n        "id": 1,\n        "orderNo": "string",\n        "productId": 1,\n        "productTitle": "string",\n        "productImage": "string",\n        "quantity": 1,\n        "totalAmount": 4500,\n        "transactionType": 2,\n        "status": 0,\n        "buyerId": 2,\n        "buyerName": "string",\n        "sellerId": 1,\n        "sellerName": "string",\n        "createdAt": "string"\n      }\n    ],\n    "total": 1,\n    "pageNum": 1,\n    "pageSize": 10\n  }\n}</pre>
            </div>
        </div>
        
        <!-- 评价接口 -->
        <h2>4. 评价接口</h2>
        
        <div class="api-section">
            <h3>4.1 创建评价</h3>
            <div class="api-header">
                <span class="api-url">/api/review</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "orderId": 0,\n  "rating": 5,\n  "comment": "string"\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": null\n}</pre>
            </div>
        </div>
        
        <!-- 文件上传接口 -->
        <h2>5. 文件上传接口</h2>
        
        <div class="api-section">
            <h3>5.1 上传文件</h3>
            <div class="api-header">
                <span class="api-url">/api/file/upload</span>
                <span class="api-method method-post">POST</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <ul class="params-list">
                    <li><code>file</code>: 要上传的文件（multipart/form-data）</li>
                </ul>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {\n    "url": "string" // 上传后的文件URL\n  }\n}</pre>
            </div>
        </div>
        
        <!-- 管理员接口 -->
        <h2>6. 管理员接口</h2>
        
        <div class="api-section">
            <h3>6.1 商品审核</h3>
            <div class="api-header">
                <span class="api-url">/api/admin/product/review</span>
                <span class="api-method method-put">PUT</span>
            </div>
            
            <div class="api-info">
                <div class="api-info-item">
                    <strong>请求头</strong>：Authorization: Bearer {token}
                </div>
            </div>
            
            <div class="params-section">
                <h4>请求参数</h4>
                <pre>{\n  "id": 0,\n  "status": 1,\n  "remark": "string"\n}</pre>
            </div>
            
            <div class="response-format">
                <h4>返回结果</h4>
                <pre>{\n  "code": 200,\n  "message": "success",\n  "data": null\n}</pre>
            </div>
        </div>
        
        <!-- 响应格式 -->
        <h2>7. 响应格式</h2>
        
        <div class="api-section">
            <h3>7.1 成功响应</h3>
            <pre>{\n  "code": 200,\n  "message": "success",\n  "data": {}\n}</pre>
        </div>
        
        <div class="api-section">
            <h3>7.2 失败响应</h3>
            <pre>{\n  "code": 500,\n  "message": "错误信息",\n  "data": null\n}</pre>
        </div>
        
        <!-- 状态码说明 -->
        <h2>8. 状态码说明</h2>
        
        <table class="status-code-table">
            <tr>
                <th>状态码</th>
                <th>说明</th>
            </tr>
            <tr>
                <td>200</td>
                <td>成功</td>
            </tr>
            <tr>
                <td>400</td>
                <td>请求参数错误</td>
            </tr>
            <tr>
                <td>401</td>
                <td>未授权，token过期或无效</td>
            </tr>
            <tr>
                <td>403</td>
                <td>禁止访问，权限不足</td>
            </tr>
            <tr>
                <td>404</td>
                <td>资源不存在</td>
            </tr>
            <tr>
                <td>500</td>
                <td>服务器内部错误</td>
            </tr>
        </table>
        
        <!-- 公共参数 -->
        <h2>9. 公共参数</h2>
        
        <div class="common-params">
            <h4>9.1 分页参数</h4>
            <ul class="params-list">
                <li><code>pageNum</code>: 页码，默认1</li>
                <li><code>pageSize</code>: 每页数量，默认10</li>
            </ul>
        </div>
        
        <div class="common-params">
            <h4>9.2 排序参数</h4>
            <ul class="params-list">
                <li><code>sort</code>: 排序字段</li>
                <li><code>order</code>: 排序方式 (asc, desc)</li>
            </ul>
        </div>
        
        <!-- 接口说明 -->
        <div class="note-section">
            <h4>接口说明</h4>
            <ul>
                <li>所有需要认证的接口都需要在请求头中添加 <code>Authorization: Bearer {token}</code></li>
                <li>日期格式统一为 <code>yyyy-MM-dd HH:mm:ss</code></li>
                <li>所有金额单位为人民币元，保留两位小数</li>
                <li>文件上传支持jpg、png、gif等格式，单文件大小不超过5MB</li>
                <li>接口返回结果中，<code>code</code> 为200表示成功，其他表示失败</li>
                <li>管理员接口只有admin角色可以访问，普通用户访问会返回403错误</li>
            </ul>
        </div>
    </div>
</body>
</html>